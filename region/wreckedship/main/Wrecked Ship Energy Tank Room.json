{
  "$schema": "../../../schema/m3-room.schema.json",
  "id": 167,
  "name": "Wrecked Ship Energy Tank Room",
  "area": "Wrecked Ship",
  "subarea": "Main",
  "playable": true,
  "roomAddress": "0x7CC27",
  "roomEnvironments": [{"heated": false}],
  "nodes": [
    {
      "id": 1,
      "name": "Right Door",
      "nodeType": "door",
      "nodeSubType": "blue",
      "nodeAddress": "0x001a288",
      "doorEnvironments": [{"physics": "air"}]
    },
    {
      "id": 2,
      "name": "Item",
      "nodeType": "item",
      "nodeSubType": "chozo",
      "nodeItem": "ETank",
      "nodeAddress": "0x7C337",
      "locks": [
        {
          "name": "Wrecked Ship Energy Tank Spawn Lock",
          "lockType": "gameFlag",
          "unlockStrats": [
            {
              "name": "Base",
              "notable": false,
              "requires": [
                {"or": [
                  "f_DefeatedPhantoon",
                  "h_AllItemsSpawned"
                ]}
              ],
              "note": "The item doesn't spawn until Phantoon is defeated."
            }
          ]
        }
      ]
    }
  ],
  "obstacles": [
    {
      "id": "A",
      "name": "Remain in G-Mode Morph to Ceiling Bomb Jump",
      "obstacleType": "abstract"
    }
  ],
  "enemies": [
    {
      "id": "e1",
      "groupName": "Wrecked Ship E-Tank Skulteras",
      "enemyName": "Skultera",
      "quantity": 2,
      "homeNodes": [1],
      "spawn": ["f_DefeatedPhantoon"],
      "note": "Drops can be reached for free using the platforms"
    }
  ],
  "links": [
    {
      "from": 1,
      "to": [
        {"id": 1},
        {"id": 2}
      ]
    },
    {
      "from": 2,
      "to": [
        {"id": 1}
      ]
    }
  ],
  "strats": [
    {
      "link": [1, 1],
      "name": "Leave with Runway",
      "requires": [],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 6,
          "openEnd": 1,
          "steepUpTiles": 1
        }
      },
      "note": "Run must be synched with the low tide."
    },
    {
      "link": [1, 1],
      "name": "Leave with Runway, Full Length",
      "requires": [
        {"or": [
          "Gravity",
          {"and": [
            {"not": "f_DefeatedPhantoon"},
            "canRiskPermanentLossOfAccess"
          ]}
        ]}
      ],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 8,
          "openEnd": 1,
          "steepUpTiles": 2
        }
      }
    },
    {
      "link": [1, 1],
      "name": "X-Mode and Space Jump, Leave with Shinespark",
      "requires": [
        "h_canXMode",
        "h_XModeThornHit",
        "h_XModeThornHit",
        "SpaceJump",
        "HiJump",
        "canShinechargeMovementComplex",
        {"canShineCharge": {
          "usedTiles": 33,
          "openEnd": 2
        }},
        {"shinespark": {"frames": 21}},
        {"or": [
          {"and": [
            "f_DefeatedPhantoon",
            "Gravity"
          ]},
          {"and": [
            {"not": "f_DefeatedPhantoon"},
            "canRiskPermanentLossOfAccess"
          ]}
        ]}
      ],
      "exitCondition": {
        "leaveWithSpark": {}
      },
      "devNote": [
        "Two thorn hits are expected per attempt (with any additional leniency hits being multiplied by this amount).",
        "FIXME: There is likely a fast wall jump climb strat with more spark frames."
      ]
    },
    {
      "link": [1, 1],
      "name": "Crystal Flash",
      "requires": [
        "h_canCrystalFlash"
      ]
    },
    {
      "link": [1, 2],
      "name": "Space Jump",
      "requires": [
        "SpaceJump"
      ]
    },
    {
      "link": [1, 2],
      "name": "Grapple",
      "requires": [
        "Grapple",
        "f_DefeatedPhantoon"
      ]
    },
    {
      "link": [1, 2],
      "name": "Walljump",
      "requires": [
        "Gravity",
        "canWalljump",
        "f_DefeatedPhantoon"
      ],
      "note": [
        "Jump across the first platforms. It is fine to jump from them when they are a bit submerged.",
        "Get a bit of run speed on the final platform, and wall jump if necessary.",
        "When accidentally falling off the platforms, it may be best to take a spike hit and climb the left wall."
      ]
    },
    {
      "link": [1, 2],
      "name": "Wrecked Ship E-Tank Platforming",
      "requires": [
        "canCarefulJump",
        "f_DefeatedPhantoon"
      ],
      "note": [
        "Jump onto the first platform, which is easiest when the water is low.",
        "Continue jumping on the platforms to prevent them from going into the water.",
        "Get a bit of run speed on the final platform, which is easiest while the water is low, then jump to the solid ground."
      ]
    },
    {
      "link": [1, 2],
      "name": "Wrecked Ship E-Tank Spring Ball Bounce",
      "requires": [
        "canSpringBallBounce",
        "f_DefeatedPhantoon"
      ],
      "note": [
        "From a standstill at the door, jump just before the first step.",
        "Do a lateral mid-air morph and bounce on the first platform.",
        "This should bounce on the third platform and get to the item."
      ]
    },
    {
      "link": [1, 2],
      "name": "Shinespark",
      "entranceCondition": {
        "comeInWithSpark": {}
      },
      "requires": [
        {"shinespark": {"frames": 59, "excessFrames": 7}}
      ],
      "devNote": "FIXME: Add come in charged strats that use fewer Shinespark frames."
    },
    {
      "link": [1, 2],
      "name": "Precise Grapple",
      "requires": [
        "canPreciseGrapple"
      ],
      "note": "Fling Samus from the first set of grapple blocks to the second set without falling. Requires precise timing."
    },
    {
      "link": [1, 2],
      "name": "Ceiling Bomb Jump",
      "requires": [
        "h_canCeilingBombJump"
      ]
    },
    {
      "link": [1, 2],
      "name": "Phantoon is Alive Walljump",
      "requires": [
        {"thornHits": 1},
        "canIframeSpikeJump",
        "canWalljump",
        {"not": "f_DefeatedPhantoon"},
        {"or": [
          "canRiskPermanentLossOfAccess",
          "canCarefulJump",
          "Gravity"
        ]}
      ],
      "note": "From the top right platform, jump to the left into the thorns, then climb the left wall.",
      "devNote": "The canCarefulJump and Gravity are here, as with either of those, there is access across with or without f_DefeatedPhantoon."
    },
    {
      "link": [1, 2],
      "name": "Phantoon is Alive Speed Walljump",
      "entranceCondition": {
        "comeInRunning": {
          "speedBooster": true,
          "minTiles": 3
        }
      },
      "requires": [
        "canCarefulJump",
        "canConsecutiveWalljump",
        {"not": "f_DefeatedPhantoon"}
      ],
      "note": [
        "Run from the adjacent room and jump at the end of the platform.",
        "From the top right platform, jump to the left and wall jump just above the spikes and climb the left wall."
      ],
      "devNote": "Because this requires canCarefulJump, there is no canRiskPermanentLossOfAccess as there is a path across with or without f_DefeatedPhantoon."
    },
    {
      "link": [1, 2],
      "name": "G-mode Morph Ceiling Bomb Jump",
      "requires": [
        "h_canArtificialMorphCeilingBombJump",
        {"comeInWithGMode": {
          "fromNodes": [1],
          "mode": "any",
          "artificialMorph": true
        }}
      ],
      "clearsObstacles": ["A"]
    },
    {
      "link": [2, 1],
      "name": "Base",
      "requires": [
        {"or": [
          "f_DefeatedPhantoon",
          "SpaceJump",
          {"and": [
            {"thornHits": 1},
            {"or": [
              "HiJump",
              "canWalljump",
              "canIframeSpikeJump",
              "Grapple",
              "canHorizontalDamageBoost",
              {"thornHits": 1}
            ]}
          ]}
        ]}
      ]
    },
    {
      "link": [2, 1],
      "name": "Precise Grapple",
      "requires": [
        "canPreciseGrapple"
      ],
      "note": "Fling Samus from the first set of grapple blocks to the second set without falling. Requires precise timing."
    },
    {
      "link": [2, 1],
      "name": "Ceiling Bomb Jump",
      "requires": [
        "h_canCeilingBombJump"
      ]
    },
    {
      "link": [2, 1],
      "name": "G-mode Morph Ceiling Bomb Jump",
      "requires": [
        "h_canArtificialMorphCeilingBombJump",
        {"obstaclesCleared": ["A"]}
      ],
      "note": "Touch the item while remaining in artificial morph. Ceiling bomb jump back to the right, then use x-ray to cancel g-mode and obtain the item."
    }
  ]
}
