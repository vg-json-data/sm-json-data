{
  "$schema": "../../../schema/m3-room.schema.json",
  "id": 178,
  "name": "Mama Turtle Room",
  "area": "Maridia",
  "subarea": "Outer",
  "playable": true,
  "roomAddress": "0x7D055",
  "roomEnvironments": [{"heated": false}],
  "nodes": [
    {
      "id": 1,
      "name": "Left Door",
      "nodeType": "door",
      "nodeSubType": "blue",
      "nodeAddress": "0x001a408",
      "doorEnvironments": [{"physics": "water"}]
    },
    {
      "id": 2,
      "name": "Top Item",
      "nodeType": "item",
      "nodeSubType": "visible",
      "nodeItem": "ETank",
      "nodeAddress": "0x7C47D"
    },
    {
      "id": 3,
      "name": "Hidden Right Item",
      "nodeType": "item",
      "nodeSubType": "hidden",
      "nodeItem": "Missile",
      "nodeAddress": "0x7C483"
    }
  ],
  "obstacles": [
    {
      "id": "A",
      "name": "Mama Turtle Sleeping",
      "obstacleType": "abstract"
    },
    {
      "id": "B",
      "name": "Get on top of the Grapple Block",
      "obstacleType": "abstract"
    }
  ],
  "enemies": [
    {
      "id": "e1",
      "groupName": "Mama Turtle",
      "enemyName": "Kame (Tatori)",
      "quantity": 1,
      "homeNodes": [1]
    },
    {
      "id": "e2",
      "groupName": "Baby Turtles",
      "enemyName": "Kame Baby",
      "quantity": 4,
      "homeNodes": [1]
    }
  ],
  "links": [
    {
      "from": 1,
      "to": [
        {"id": 1},
        {
          "id": 2,
          "devNote": "Although most strats from 1->2 wake Mama Turtle, it is free to leave the room from 2->1."
        },
        {"id": 3}
      ]
    },
    {
      "from": 2,
      "to": [
        {"id": 1},
        {"id": 3}
      ]
    },
    {
      "from": 3,
      "to": [
        {"id": 1}
      ]
    }
  ],
  "strats": [
    {
      "link": [1, 1],
      "name": "Leave with Runway",
      "requires": [],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 19,
          "gentleDownTiles": 2,
          "openEnd": 1
        }
      }
    },
    {
      "link": [1, 1],
      "name": "Crystal Flash",
      "requires": [
        "h_canCrystalFlash"
      ]
    },
    {
      "link": [1, 2],
      "name": "Grapple",
      "requires": [
        "h_canNavigateUnderwater",
        "Grapple"
      ],
      "clearsObstacles": ["A", "B"],
      "note": [
        "To get out of the water, ride Mama Turtle. To avoid getting hit, shoot one of her babies to wake her up, then quickly get on her back.",
        "If Mama Turtle is in her starting location, stand on the rightmost side of her to be aligned below the grapple block.",
        "With a miss, if you havent moved horizontally, simply fall straight down to land safely back on to her."
      ]
    },
    {
      "link": [1, 2],
      "name": "Space Jump",
      "requires": [
        "h_canNavigateUnderwater",
        "SpaceJump"
      ],
      "clearsObstacles": ["A", "B"],
      "note": "To get out of the water, ride Mama Turtle. To avoid getting hit, shoot one of her babies to wake her up, then quickly get on her back."
    },
    {
      "link": [1, 2],
      "name": "Jump into IBJ",
      "requires": [
        "h_canNavigateUnderwater",
        "h_canJumpIntoIBJ"
      ],
      "clearsObstacles": ["A", "B"],
      "note": [
        "Ride Mama Turtle. To avoid getting hit, shoot one of her babies to wake her up, then quickly get on her back.",
        "Once out of the water, jump into an IBJ.",
        "With a miss, if you havent moved horizontally, simply fall straight down to land safely back on Mama Turtle."
      ]
    },
    {
      "link": [1, 2],
      "name": "Mama Turtle Wall Jump Bomb Boost",
      "notable": true,
      "requires": [
        "h_canNavigateUnderwater",
        "canWallJumpBombBoost"
      ],
      "clearsObstacles": ["A"],
      "note": [
        "Starting from the top left ledge, wall jump to place a bomb or Power Bomb just below and to the right of the bottom left plant on the wall.",
        "Use the bomb to boost you towards the item, then unmorph to reduce your fall speed and barely reach the item."
      ]
    },
    {
      "link": [1, 2],
      "name": "In-Room Shinespark",
      "requires": [
        "Gravity",
        {"canShineCharge": {
          "usedTiles": 19,
          "gentleUpTiles": 2,
          "openEnd": 1
        }},
        "canShinechargeMovement",
        {"or": [
          {"shinespark": {"frames": 60, "excessFrames": 5}},
          {"and": [
            "canMidairShinespark",
            {"shinespark": {"frames": 55, "excessFrames": 5}}
          ]},
          {"and": [
            "canMidairShinespark",
            "HiJump",
            {"shinespark": {"frames": 50, "excessFrames": 5}}
          ]}
        ]}
      ],
      "clearsObstacles": ["B"],
      "devNote": "This could have a few more excess frames if not getting on top of the block to go to 2."
    },
    {
      "link": [1, 2],
      "name": "Shinespark",
      "entranceCondition": {
        "comeInShinecharging": {
          "length": 18,
          "gentleUpTiles": 2,
          "openEnd": 1
        }
      },
      "requires": [
        "Gravity",
        "canShinechargeMovement",
        {"or": [
          {"shinespark": {"frames": 60, "excessFrames": 5}},
          {"and": [
            "canMidairShinespark",
            {"shinespark": {"frames": 55, "excessFrames": 5}}
          ]},
          {"and": [
            "canMidairShinespark",
            "HiJump",
            {"shinespark": {"frames": 50, "excessFrames": 5}}
          ]}
        ]}
      ],
      "clearsObstacles": ["B"],
      "devNote": "This could have a few more excess frames if not getting on top of the block to go to 2."
    },
    {
      "link": [1, 2],
      "name": "Shinespark, Charge Outside",
      "entranceCondition": {
        "comeInShinecharged": {
          "framesRequired": 110
        }
      },
      "requires": [
        "Gravity",
        "canShinechargeMovement",
        {"shinespark": {"frames": 60}}
      ],
      "clearsObstacles": ["B"],
      "devNote": "This could have a few more excess frames if not getting on top of the block to go to 2."
    },
    {
      "link": [1, 2],
      "name": "Spring Ball Jump",
      "requires": [
        "h_canNavigateUnderwater",
        "HiJump",
        "canSpringBallJumpMidAir"
      ],
      "clearsObstacles": ["A", "B"],
      "note": [
        "Ride Mama Turtle. To avoid getting hit, shoot one of her babies to wake her up, then quickly get on her back.",
        "With a fail, if you havent moved horizontally, simply fall straight down to land safely back on Mama Turtle."
      ]
    },
    {
      "link": [1, 2],
      "name": "Tricky Speed Hi Jump",
      "requires": [
        "h_canNavigateUnderwater",
        "HiJump",
        "canTrickyJump",
        "SpeedBooster",
        "canWalljump"
      ],
      "clearsObstacles": ["A", "B"],
      "note": [
        "To get out of the water, ride Mama Turtle. To avoid getting hit, shoot one of her babies to wake her up, then quickly get on her back.",
        "Briefly run on the top ledge on either side (left is slightly easier) then jump and wall jump on the grapple block."
      ]
    },
    {
      "link": [1, 2],
      "name": "Mama Turtle Springwall",
      "requires": [
        "h_canNavigateUnderwater",
        "canSpringwall",
        "canResetFallSpeed"
      ],
      "clearsObstacles": ["A"],
      "note": "To get out of the water, ride Mama Turtle. To avoid getting hit, shoot one of her babies to wake her up, then quickly get on her back.",
      "devNote": "FIXME: It is possible to do this without canResetFallSpeed, but with a spring fling. A spring ball jump midair could be added, which combined with a spring fling can get onto the platform."
    },
    {
      "link": [1, 2],
      "name": "Mama Turtle Insane Walljump",
      "notable": true,
      "requires": [
        "h_canNavigateUnderwater",
        "HiJump",
        "canStationarySpinJump",
        "canInsaneWalljump",
        "canCWJ"
      ],
      "clearsObstacles": ["A", "B"],
      "note": [
        "Have to do a running stationary spinjump from a precise spot, to do a CWJ with slightly more speed off the wall one tile further out.",
        "This makes it possible to just barely walljump off the grapple block."
      ]
    },
    {
      "link": [1, 2],
      "name": "Suitless Water Shinecharge",
      "entranceCondition": {
        "comeInShinecharging": {
          "length": 4,
          "openEnd": 1
        }
      },
      "requires": [
        "canWaterShineCharge",
        "canShinechargeMovement",
        {"canShineCharge": {
          "usedTiles": 33,
          "openEnd": 2
        }},
        {"or": [
          {"shinespark": {"frames": 61, "excessFrames": 7}},
          {"and": [
            "canMidairShinespark",
            {"shinespark": {"frames": 56, "excessFrames": 7}}
          ]},
          {"and": [
            "canMidairShinespark",
            "HiJump",
            {"shinespark": {"frames": 52, "excessFrames": 7}}
          ]}
        ]}
      ],
      "clearsObstacles": ["B"],
      "devNote": [
        "This could have a few more excess frames if not getting on top of the block to go to 2.",
        "This runway length is just an estimate of the worst case scenario for difficulties that can't use canStutterWaterShineCharge."
      ]
    },
    {
      "link": [1, 2],
      "name": "Suitless Stutter Water Shinecharge",
      "entranceCondition": {
        "comeInRunning": {
          "speedBooster": true,
          "minTiles": 2
        }
      },
      "requires": [
        "canStutterWaterShineCharge",
        "canShinechargeMovement",
        {"canShineCharge": {
          "usedTiles": 33,
          "openEnd": 2
        }},
        {"or": [
          {"shinespark": {"frames": 61, "excessFrames": 7}},
          {"and": [
            "canMidairShinespark",
            {"shinespark": {"frames": 56, "excessFrames": 7}}
          ]},
          {"and": [
            "canMidairShinespark",
            "HiJump",
            {"shinespark": {"frames": 52, "excessFrames": 7}}
          ]}
        ]}
      ],
      "clearsObstacles": ["B"],
      "devNote": "This could have a few more excess frames if not getting on top of the block to go to 2."
    },
    {
      "link": [1, 2],
      "name": "G-Mode Morph - Let Mama Turtle Sleep",
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [1],
          "mode": "any",
          "artificialMorph": true
        }},
        "Gravity",
        "h_canArtificialMorphIBJ",
        "canBombHorizontally"
      ],
      "clearsObstacles": ["B"],
      "note": [
        "Get into position as close to the center of the room as possible while not being too close to any baby turtles.",
        "Start an IBJ without hiting any baby turtles otherwhise Mama Turtle will wake up."
      ]
    },
    {
      "link": [1, 2],
      "name": "G-Mode Morph - Wake Mama Turtle",
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [1],
          "mode": "any",
          "artificialMorph": true
        }},
        "canSuitlessMaridia",
        "SpringBall",
        "h_canArtificialMorphIBJ"
      ],
      "clearsObstacles": ["A", "B"],
      "note": [
        "Place a bomb next to one of the baby turtles, then use spring ball to get on Mama Turtle's back.",
        "Start an IBJ above the waterline to get to the item."
      ]
    },
    {
      "link": [1, 3],
      "name": "Ride Mama Turtle",
      "requires": [
        "h_canNavigateUnderwater",
        {"or": [
          "canWalljump",
          "SpaceJump",
          "HiJump"
        ]}
      ],
      "clearsObstacles": ["A"],
      "note": "Ride Mama Turtle. To avoid getting hit, shoot one of her babies to wake her up, then quickly get on her back."
    },
    {
      "link": [1, 3],
      "name": "Grapple",
      "requires": [
        "h_canNavigateUnderwater",
        "Grapple"
      ],
      "clearsObstacles": ["A"],
      "note": [
        "Ride Mama Turtle. To avoid getting hit, shoot one of her babies to wake her up, then quickly get on her back.",
        "If Mama Turtle is in her starting location, stand on the rightmost side of her to be aligned below the grapple block.",
        "With a miss, if you havent moved horizontally, simply fall straight down to land safely back on to her."
      ]
    },
    {
      "link": [1, 3],
      "name": "Ride Mama Turtle on the Right",
      "requires": [
        "h_canNavigateUnderwater",
        {"or": [
          "canTrickyJump",
          {"enemyDamage": {
            "enemy": "Kame (Tatori)",
            "type": "contact",
            "hits": 1
          }}
        ]}
      ],
      "clearsObstacles": ["A"],
      "note": "Requires getting back on Mama Turtle while she is at the right."
    },
    {
      "link": [1, 3],
      "name": "In-Room Shinespark",
      "requires": [
        "Gravity",
        {"canShineCharge": {
          "usedTiles": 19,
          "gentleUpTiles": 2,
          "openEnd": 1
        }},
        {"or": [
          {"shinespark": {"frames": 43, "excessFrames": 4}},
          {"and": [
            "canMidairShinespark",
            {"shinespark": {"frames": 37, "excessFrames": 5}}
          ]},
          {"and": [
            "canMidairShinespark",
            "HiJump",
            {"shinespark": {"frames": 32, "excessFrames": 4}}
          ]}
        ]}
      ]
    },
    {
      "link": [1, 3],
      "name": "Shinespark",
      "entranceCondition": {
        "comeInShinecharging": {
          "length": 18,
          "gentleUpTiles": 2,
          "openEnd": 1
        }
      },
      "requires": [
        "Gravity",
        {"or": [
          {"shinespark": {"frames": 43, "excessFrames": 4}},
          {"and": [
            "canMidairShinespark",
            {"shinespark": {"frames": 37, "excessFrames": 5}}
          ]},
          {"and": [
            "canMidairShinespark",
            "HiJump",
            {"shinespark": {"frames": 32, "excessFrames": 4}}
          ]}
        ]}
      ]
    },
    {
      "link": [1, 3],
      "name": "Charge Outside",
      "entranceCondition": {
        "comeInShinecharged": {
          "framesRequired": 80
        }
      },
      "requires": [
        "Gravity",
        {"shinespark": {"frames": 43, "excessFrames": 4}}
      ]
    },
    {
      "link": [1, 3],
      "name": "Let Mama Turtle Sleep",
      "requires": [
        "Gravity",
        {"or": [
          "canWalljump",
          "h_canFly"
        ]}
      ]
    },
    {
      "link": [1, 3],
      "name": "Suitless Climb the Right Wall",
      "requires": [
        "canSuitlessMaridia",
        "HiJump",
        "canDownGrab",
        {"or": [
          {"and": [
            "canSpaceJumpWaterBounce",
            "canWalljump"
          ]},
          "canSpaceJumpWaterEscape"
        ]}
      ]
    },
    {
      "link": [1, 3],
      "name": "Suitless Water Shinecharge",
      "entranceCondition": {
        "comeInShinecharging": {
          "length": 4,
          "openEnd": 1
        }
      },
      "requires": [
        "canWaterShineCharge",
        "canShinechargeMovement",
        {"canShineCharge": {
          "usedTiles": 33,
          "openEnd": 2
        }},
        {"or": [
          {"shinespark": {"frames": 47, "excessFrames": 5}},
          {"and": [
            "canMidairShinespark",
            {"shinespark": {"frames": 44, "excessFrames": 5}}
          ]},
          {"and": [
            "canMidairShinespark",
            "HiJump",
            {"shinespark": {"frames": 41, "excessFrames": 5}}
          ]}
        ]}
      ],
      "devNote": "This runway length is just an estimate of the worst case scenario for difficulties that can't use canStutterWaterShineCharge."
    },
    {
      "link": [1, 3],
      "name": "Suitless Stutter Water Shinecharge",
      "entranceCondition": {
        "comeInRunning": {
          "speedBooster": true,
          "minTiles": 2
        }
      },
      "requires": [
        "canStutterWaterShineCharge",
        "canShinechargeMovement",
        {"canShineCharge": {
          "usedTiles": 33,
          "openEnd": 2
        }},
        {"or": [
          {"shinespark": {"frames": 47, "excessFrames": 5}},
          {"and": [
            "canMidairShinespark",
            {"shinespark": {"frames": 44, "excessFrames": 5}}
          ]},
          {"and": [
            "canMidairShinespark",
            "HiJump",
            {"shinespark": {"frames": 41, "excessFrames": 5}}
          ]}
        ]}
      ],
      "note": "Requires at least 2 tiles in the adjacent room."
    },
    {
      "link": [1, 3],
      "name": "G-Mode Morph - Let Mama Turtle Sleep",
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [1],
          "mode": "any",
          "artificialMorph": true
        }},
        "Gravity",
        "h_canArtificialMorphIBJ",
        "canBombHorizontally"
      ],
      "note": "IBJ up a bit, then bomb over Mama Turtle and her babies to prevent her from waking. Then IBJ to the high right ledge before exiting g-mode."
    },
    {
      "link": [2, 1],
      "name": "Base",
      "requires": []
    },
    {
      "link": [2, 3],
      "name": "Jump to the Right Ledge",
      "requires": [
        {"obstaclesCleared": ["B"]}
      ]
    },
    {
      "link": [3, 1],
      "name": "Base",
      "requires": [
        "Gravity"
      ]
    },
    {
      "link": [3, 1],
      "name": "Suitless Dodge",
      "requires": [
        "canSuitlessMaridia",
        "canCarefulJump",
        {"or": [
          "HiJump",
          "Morph"
        ]}
      ]
    },
    {
      "link": [3, 1],
      "name": "Suitless Back on the Back",
      "requires": [
        "canSuitlessMaridia",
        "canTrickyJump"
      ],
      "note": "Get back on Mama Turtles back, then jump to the left at the top."
    },
    {
      "link": [3, 1],
      "name": "Suitless Tank",
      "requires": [
        "canSuitlessMaridia",
        {"enemyDamage": {
          "enemy": "Kame (Tatori)",
          "type": "contact",
          "hits": 1
        }}
      ]
    },
    {
      "link": [3, 1],
      "name": "Suitless Mama is Sleeping",
      "requires": [
        "canSuitlessMaridia",
        {"obstaclesNotCleared": ["A"]}
      ],
      "note": "This is assuming Mama Turtle is still sleeping."
    }
  ]
}
