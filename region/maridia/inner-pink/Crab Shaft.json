{
  "$schema": "../../../schema/m3-room.schema.json",
  "id": 175,
  "name": "Crab Shaft",
  "area": "Maridia",
  "subarea": "Inner",
  "subsubarea": "Pink",
  "playable": true,
  "roomAddress": "0x7D1A3",
  "roomEnvironments": [{"heated": false}],
  "nodes": [
    {
      "id": 1,
      "name": "Left Door",
      "nodeType": "door",
      "nodeSubType": "blue",
      "nodeAddress": "0x001a4b0",
      "doorEnvironments": [{"physics": "water"}],
      "leaveWithGModeSetup": [
        {"strats": [
          {
            "name": "Get Hit By Sciser",
            "notable": false,
            "requires": []
          }
        ]}
      ],
      "gModeImmobile": {
        "requires": [
          {"ammo": {"type": "Super", "count": 1}},
          {"enemyDamage": {
            "enemy": "Sciser",
            "type": "contact",
            "hits": 1
          }}
        ]
      }
    },
    {
      "id": 2,
      "name": "Right Door",
      "nodeType": "door",
      "nodeSubType": "green",
      "nodeAddress": "0x001a4c8",
      "doorEnvironments": [{"physics": "water"}],
      "leaveWithGModeSetup": [
        {"strats": [
          {
            "name": "Get Hit By Sciser",
            "notable": false,
            "requires": []
          }
        ]}
      ],
      "gModeImmobile": {
        "requires": [
          {"enemyDamage": {
            "enemy": "Sciser",
            "type": "contact",
            "hits": 1
          }}
        ]
      },
      "locks": [
        {
          "name": "Crab Shaft Green Lock (to Aqueduct)",
          "lockType": "coloredDoor",
          "unlockStrats": [
            {
              "name": "Base",
              "notable": false,
              "requires": [
                "h_canOpenGreenDoors"
              ]
            }
          ]
        }
      ]
    },
    {
      "id": 3,
      "name": "Top Door",
      "nodeType": "door",
      "nodeSubType": "blue",
      "nodeAddress": "0x001a4bc",
      "doorEnvironments": [{"physics": "water"}],
      "leaveWithGModeSetup": [
        {"strats": [
          {
            "name": "Frozen Sciser",
            "notable": false,
            "requires": [
              "canUpwardGModeSetup",
              "canTrickyUseFrozenEnemies",
              {"or": [
                {"ammo": {"type": "Super", "count": 1}},
                "Gravity",
                {"and": [
                  "canSuitlessMaridia",
                  {"or": [
                    "HiJump",
                    "canBePatient"
                  ]}
                ]}
              ]}
            ],
            "note": [
              "The Global crab in the upper section can be knocked off the wall to enter the left side of the above door.",
              "Otherwise, there are more crabs in the lower section of the room."
            ]
          }
        ]}
      ],
      "gModeImmobile": {
        "requires": [
          {"ammo": {"type": "Super", "count": 1}},
          {"enemyDamage": {
            "enemy": "Sciser",
            "type": "contact",
            "hits": 1
          }}
        ],
        "devNote": "Requires entering on either side of the doorway, but not in the center."
      },
      "devNote": "No spawnAt and no junction below, because the door can be entered with just a crouch jump"
    }
  ],
  "enemies": [
    {
      "id": "e1",
      "groupName": "Crab Shaft Bottom Scisers",
      "enemyName": "Sciser",
      "quantity": 3,
      "homeNodes": [2]
    },
    {
      "id": "e2",
      "groupName": "Crab Shaft Top Sciser",
      "enemyName": "Sciser",
      "quantity": 1,
      "homeNodes": [3]
    }
  ],
  "reusableRoomwideNotable": [
    {
      "name": "Crab Shaft Ice Only Crab Climb",
      "note": "Climb the frozen crabs Suitless without the help of SpringBall jumps or HiJump."
    }
  ],
  "links": [
    {
      "from": 1,
      "to": [
        {"id": 1},
        {"id": 2},
        {"id": 3}
      ]
    },
    {
      "from": 2,
      "to": [
        {"id": 1},
        {"id": 2}
      ]
    },
    {
      "from": 3,
      "to": [
        {"id": 1},
        {"id": 3}
      ]
    }
  ],
  "strats": [
    {
      "link": [1, 1],
      "name": "Leave with Runway",
      "requires": [],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 14,
          "openEnd": 0
        }
      }
    },
    {
      "link": [1, 1],
      "name": "Sciser Farm",
      "requires": [
        {"resetRoom": {
          "nodes": [1],
          "mustStayPut": false
        }},
        {"refill": ["Energy", "PowerBomb"]}
      ]
    },
    {
      "link": [1, 1],
      "name": "Crystal Flash",
      "requires": [
        "h_canCrystalFlash"
      ]
    },
    {
      "link": [1, 2],
      "name": "Base",
      "requires": []
    },
    {
      "link": [1, 3],
      "name": "Base",
      "requires": [
        "Gravity",
        {"or": [
          "HiJump",
          "canWalljump",
          "h_canFly",
          "canUseFrozenEnemies"
        ]}
      ]
    },
    {
      "link": [1, 3],
      "name": "Crab Shaft Suitless Walljump Climb with HiJump",
      "notable": true,
      "requires": [
        "canSuitlessMaridia",
        "HiJump",
        "canConsecutiveWalljump"
      ],
      "note": "Wall jump back and forth up the shaft. It's a really long climb."
    },
    {
      "link": [1, 3],
      "name": "Shinespark",
      "entranceCondition": {
        "comeInShinecharged": {
          "framesRequired": 60
        }
      },
      "requires": [
        "h_canNavigateUnderwater",
        {"shinespark": {"frames": 40, "excessFrames": 6}},
        {"or": [
          "canCrouchJump",
          "Gravity",
          "HiJump",
          "canSpringBallJumpMidAir",
          {"and": [
            "canTrickyUseFrozenEnemies",
            {"ammo": {"type": "Super", "count": 1}}
          ]}
        ]}
      ],
      "devNote": "This does not require canWaterShineCharge, as you can store the shinecharge before entering the room."
    },
    {
      "link": [1, 3],
      "name": "Shinespark",
      "entranceCondition": {
        "comeInShinecharging": {
          "length": 13,
          "openEnd": 0
        }
      },
      "requires": [
        "h_canNavigateUnderwater",
        {"shinespark": {"frames": 40, "excessFrames": 6}},
        "Gravity"
      ]
    },
    {
      "link": [1, 3],
      "name": "Crab Shaft Crab Climb",
      "notable": true,
      "requires": [
        "h_canNavigateUnderwater",
        "canTrickyUseFrozenEnemies",
        "canCarefulJump",
        {"or": [
          "canCrouchJump",
          "Gravity",
          "HiJump",
          "canSpringBallJumpMidAir",
          {"ammo": {"type": "Super", "count": 1}}
        ]}
      ],
      "reusableRoomwideNotable": "Crab Shaft Ice Only Crab Climb",
      "note": [
        "Freeze a crab multiple times to climb the upper Crab Shaft.",
        "It may be easier to climb the left shaft by knocking the crab off the wall, or by bringing up a crab from the lower area."
      ]
    },
    {
      "link": [1, 3],
      "name": "Frozen HiJump",
      "requires": [
        "canSuitlessMaridia",
        "HiJump",
        "canUseFrozenEnemies"
      ]
    },
    {
      "link": [1, 3],
      "name": "Frozen SpringBall",
      "requires": [
        "canSuitlessMaridia",
        "canSpringBallJumpMidAir",
        "canUseFrozenEnemies"
      ]
    },
    {
      "link": [1, 3],
      "name": "Dual Jump Assist",
      "requires": [
        "canSuitlessMaridia",
        "canSpringBallJumpMidAir",
        "HiJump"
      ]
    },
    {
      "link": [1, 3],
      "name": "Cross Room Jump with HiJump",
      "entranceCondition": {
        "comeInJumping": {
          "speedBooster": "any",
          "minTiles": 0.4375
        }
      },
      "requires": [
        "HiJump",
        "canCrossRoomJumpIntoWater",
        "canMomentumConservingTurnaround"
      ],
      "note": "Only requires a runway of approximately 1 tile in the adjacent room."
    },
    {
      "link": [1, 3],
      "name": "Cross Room Jump with Speedbooster",
      "entranceCondition": {
        "comeInJumping": {
          "speedBooster": true,
          "minTiles": 12
        }
      },
      "requires": [
        "canCrossRoomJumpIntoWater",
        "canMomentumConservingTurnaround",
        "canDownGrab",
        {"or": [
          "canCrouchJump",
          "Gravity",
          "HiJump",
          "canSpringBallJumpMidAir",
          {"and": [
            "canTrickyUseFrozenEnemies",
            {"ammo": {"type": "Super", "count": 1}}
          ]}
        ]}
      ],
      "note": "Requires at least 12 tiles in the adjacent room."
    },
    {
      "link": [1, 3],
      "name": "Cross Room Jump with Speedbooster, Spring Ball",
      "entranceCondition": {
        "comeInJumping": {
          "speedBooster": true,
          "minTiles": 6.4375
        }
      },
      "requires": [
        "canTrickyDashJump",
        "canSpringBallJumpMidAir",
        "canCrossRoomJumpIntoWater",
        "canMomentumConservingTurnaround"
      ],
      "note": [
        "Requires running a very precise distance equivalent to a runway of 7 tiles with no open end in the adjacent room, to hit a peak in the speed / height relationship.",
        "The spring ball jump is used after landing near the top, to get to the platform below the door."
      ]
    },
    {
      "link": [1, 3],
      "name": "Suitless Water Shinecharge",
      "entranceCondition": {
        "comeInRunning": {
          "speedBooster": true,
          "minTiles": 2
        }
      },
      "requires": [
        "canStutterWaterShineCharge",
        "canShinechargeMovementComplex",
        {"canShineCharge": {
          "usedTiles": 33,
          "openEnd": 2
        }},
        {"shinespark": {"frames": 40, "excessFrames": 6}},
        {"or": [
          "canCrouchJump",
          "Gravity",
          "HiJump",
          "canSpringBallJumpMidAir",
          {"and": [
            "canTrickyUseFrozenEnemies",
            {"ammo": {"type": "Super", "count": 1}}
          ]}
        ]}
      ],
      "note": [
        "After storing the shinecharge, spin jump back to the left and spark aligned against the right side of the left shaft.",
        "At the top of the room, hold right in order to land on the platform below the door."
      ]
    },
    {
      "link": [1, 3],
      "name": "G-Mode Morph",
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [1],
          "mode": "any",
          "artificialMorph": true
        }},
        "Gravity",
        "h_canArtificialMorphIBJ"
      ]
    },
    {
      "link": [1, 3],
      "name": "Crab Shaft Sciser Ice Clip Door Lock Skip",
      "notable": true,
      "requires": [
        {"ammo": {"type": "Super", "count": 1}},
        "canTrickyUseFrozenEnemies",
        {"or": [
          "h_canXRayCeilingClip",
          {"and": [
            "Gravity",
            "canPreciseCeilingClip"
          ]}
        ]}
      ],
      "bypassesDoorShell": true,
      "note": [
        "Shoot the shot block in the middle of the room, to allow a global Sciser (crab) to pass to the top part of the room.",
        "Use Ice to climb the Scisers to the top of the room.",
        "Shoot a Super as a Sciser crawls near the top door, then freeze it mid-air and use it to clip up past the door shell.",
        "If you don't have Morph and X-Ray, you must shoot the Super while the Sciser is on a block next to the door, not on the door itself."
      ]
    },
    {
      "link": [2, 1],
      "name": "Base",
      "requires": [
        "Gravity"
      ]
    },
    {
      "link": [2, 1],
      "name": "Suitless HiJump",
      "requires": [
        "canSuitlessMaridia",
        "HiJump",
        {"or": [
          "h_canCrouchJumpDownGrab",
          "canSpringBallJumpMidAir",
          "canUseFrozenEnemies"
        ]}
      ]
    },
    {
      "link": [2, 1],
      "name": "Suitless SpringBall",
      "requires": [
        "canSuitlessMaridia",
        "canSpringBallJumpMidAir",
        {"or": [
          "h_canMaxHeightSpringBallJump",
          "HiJump",
          "canUseFrozenEnemies"
        ]}
      ]
    },
    {
      "link": [2, 1],
      "name": "Crab Shaft Bottom Frozen Falling Crab",
      "requires": [
        "canSuitlessMaridia",
        "canTrickyUseFrozenEnemies",
        {"ammo": {"type": "Super", "count": 1}}
      ],
      "note": "Involves a Super to freeze a crab in midair."
    },
    {
      "link": [2, 1],
      "name": "Crab Shaft Bottom Frozen Crab Steps",
      "notable": true,
      "requires": [
        "canSuitlessMaridia",
        "canTrickyUseFrozenEnemies",
        "canCrouchJump"
      ],
      "reusableRoomwideNotable": "Crab Shaft Ice Only Crab Climb",
      "note": [
        "Freeze a crab below the opening, and another one at the ceiling on the lip of the entrance.",
        "Stand on a frozen crab and crouch jump to the one on the ceiling.",
        "When against the top crab, press into it to be pushed up onto it."
      ]
    },
    {
      "link": [2, 1],
      "name": "Crab Shaft Bottom Repetitive Walljumps",
      "notable": true,
      "requires": [
        "canSunkenTileWideWallClimb",
        "canUseFrozenEnemies",
        "canStationarySpinJump"
      ],
      "reusableRoomwideNotable": "Crab Shaft Ice Only Crab Climb",
      "note": [
        "Similar to naked watering hole escape.",
        "Freeze a crab under the gap above, do a stationary spinjump facing right, then walljump until you're up.",
        "Another frozen crab can help complete the way up."
      ]
    },
    {
      "link": [2, 2],
      "name": "Leave with Runway",
      "requires": [],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 4,
          "openEnd": 1
        }
      }
    },
    {
      "link": [2, 2],
      "name": "Sciser Farm",
      "requires": [
        {"resetRoom": {
          "nodes": [2],
          "mustStayPut": false
        }},
        {"refill": ["Energy", "PowerBomb"]}
      ]
    },
    {
      "link": [2, 2],
      "name": "Leave Shinecharged",
      "requires": [
        "Gravity",
        "canShinechargeMovement",
        {"canShineCharge": {
          "usedTiles": 23,
          "openEnd": 0
        }}
      ],
      "exitCondition": {
        "leaveShinecharged": {
          "framesRemaining": 90
        }
      }
    },
    {
      "link": [2, 2],
      "name": "Crystal Flash",
      "requires": [
        "h_canCrystalFlash"
      ]
    },
    {
      "link": [3, 1],
      "name": "Base",
      "requires": []
    },
    {
      "link": [3, 3],
      "name": "Crystal Flash",
      "requires": [
        "h_canCrystalFlash"
      ]
    }
  ]
}
