{
  "$schema": "../../../schema/m3-room.schema.json",
  "id": 186,
  "name": "Botwoon Energy Tank Room",
  "area": "Maridia",
  "subarea": "Inner",
  "subsubarea": "Pink",
  "playable": true,
  "roomAddress": "0x7D7E4",
  "roomEnvironments": [{"heated": false}],
  "nodes": [
    {
      "id": 1,
      "name": "Left Door",
      "nodeType": "door",
      "nodeSubType": "blue",
      "nodeAddress": "0x001a84c",
      "doorEnvironments": [{"physics": "water"}],
      "leaveWithGModeSetup": [
        {"strats": [
          {
            "name": "Get Hit By Puyo",
            "notable": false,
            "requires": []
          }
        ]}
      ]
    },
    {
      "id": 2,
      "name": "Left Sand Pit",
      "nodeType": "exit",
      "nodeSubType": "sandpit",
      "nodeAddress": "0x001a858",
      "devNote": "FIXME Add leaveWithGMode strats. These can't currently be represented in the logic."
    },
    {
      "id": 3,
      "name": "Right Sand Pit",
      "nodeType": "exit",
      "nodeSubType": "sandpit",
      "nodeAddress": "0x001a864",
      "devNote": "FIXME Add leaveWithGMode strats. These can't currently be represented in the logic."
    },
    {
      "id": 4,
      "name": "Right Door",
      "nodeType": "door",
      "nodeSubType": "blue",
      "nodeAddress": "0x001a870",
      "doorEnvironments": [{"physics": "water"}],
      "leaveWithGModeSetup": [
        {"strats": [
          {
            "name": "Get Hit By Zoa",
            "notable": false,
            "requires": [],
            "note": "Lure the Zoas. Jump so that they start moving horizontally while higher, use spin jumps to move horizontally faster while keeping them on screen."
          }
        ]}
      ]
    },
    {
      "id": 5,
      "name": "Item",
      "nodeType": "item",
      "nodeSubType": "visible",
      "nodeItem": "ETank",
      "nodeAddress": "0x7C755"
    },
    {
      "id": 6,
      "name": "Junction Right of Morph Passage",
      "nodeType": "junction",
      "nodeSubType": "junction"
    }
  ],
  "obstacles": [
    {
      "id": "A",
      "name": "Speed Blocks",
      "obstacleType": "inanimate"
    },
    {
      "id": "B",
      "name": "G-Mode Grab Item and Leave Before Exiting G-Mode",
      "obstacleType": "abstract"
    }
  ],
  "enemies": [
    {
      "id": "e1",
      "groupName": "Botwoon E-Tank Left Puyos",
      "enemyName": "Puyo",
      "quantity": 4,
      "homeNodes": [1]
    },
    {
      "id": "e2",
      "groupName": "Botwoon E-Tank Right Puyo",
      "enemyName": "Puyo",
      "quantity": 1,
      "homeNodes": [3]
    },
    {
      "id": "e3",
      "groupName": "Botwoon E-Tank Zoas",
      "enemyName": "Zoa",
      "quantity": 5,
      "homeNodes": [4],
      "farmCycles": [
        {
          "name": "Zoa Power Beam spam",
          "cycleFrames": 150,
          "requires": [
            "Gravity"
          ],
          "note": "Needs Gravity to get into the sand"
        },
        {
          "name": "Zoa Power Beam suitless back and forth",
          "cycleFrames": 300,
          "requires": [
            "canSuitlessMaridia"
          ]
        },
        {
          "name": "Zoa diagonal Grapple",
          "cycleFrames": 150,
          "requires": [
            "Grapple"
          ]
        }
      ]
    }
  ],
  "links": [
    {
      "from": 1,
      "to": [
        {"id": 1},
        {
          "id": 2,
          "devNote": "There's nothing difficult about getting here suitless, but it does run a heavy risk of leading the player into suitless Maridia situations."
        },
        {
          "id": 3,
          "devNote": "There's nothing difficult about getting here suitless, but it does run a heavy risk of leading the player into suitless Maridia situations."
        },
        {
          "id": 4,
          "devNote": "Direct link passing below. Passage above should go 1 -> 5 -> 4."
        },
        {"id": 5}
      ]
    },
    {
      "from": 2,
      "to": []
    },
    {
      "from": 3,
      "to": []
    },
    {
      "from": 4,
      "to": [
        {
          "id": 1,
          "devNote": "Direct link passing below. Passage above should go 4 -> 6 -> 5 -> 1."
        },
        {"id": 4},
        {"id": 5},
        {"id": 6}
      ]
    },
    {
      "from": 5,
      "to": [
        {"id": 1},
        {"id": 4},
        {"id": 6}
      ]
    },
    {
      "from": 6,
      "to": [
        {"id": 4},
        {"id": 5}
      ]
    }
  ],
  "strats": [
    {
      "link": [1, 1],
      "name": "Leave with Runway",
      "requires": [],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 3,
          "openEnd": 1
        }
      }
    },
    {
      "link": [1, 1],
      "name": "Puyo Farm",
      "requires": [
        {"refill": ["Energy", "Missile", "PowerBomb"]}
      ]
    },
    {
      "link": [1, 1],
      "name": "Leave Shinecharged",
      "requires": [
        "Gravity",
        {"canShineCharge": {
          "usedTiles": 33,
          "openEnd": 2
        }}
      ],
      "exitCondition": {
        "leaveShinecharged": {
          "framesRemaining": 120
        }
      }
    },
    {
      "link": [1, 2],
      "name": "Base",
      "requires": []
    },
    {
      "link": [1, 3],
      "name": "Base",
      "requires": [
        "h_canNavigateUnderwater"
      ]
    },
    {
      "link": [1, 4],
      "name": "Leave with Runway Through the Speed Blocks",
      "requires": [
        {"canShineCharge": {
          "usedTiles": 33,
          "openEnd": 2
        }}
      ],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 45,
          "openEnd": 1
        }
      }
    },
    {
      "link": [1, 4],
      "name": "Speed Blocks Already Broken Suitless",
      "requires": [
        "canSuitlessMaridia",
        "HiJump",
        {"or": [
          "h_canUseSpringBall",
          "canPlayInSand"
        ]},
        {"obstaclesCleared": ["A"]}
      ],
      "devNote": [
        "Gravity can run across the sand with speed again.",
        "FIXME: This is possible without HiJump by breaking spin before landing, then quickly jumping again. Useful in other places as well, like Aqueduct."
      ]
    },
    {
      "link": [1, 4],
      "name": "Base",
      "requires": [
        "Gravity",
        {"canShineCharge": {
          "usedTiles": 33,
          "openEnd": 1,
          "gentleDownTiles": 3,
          "steepDownTiles": 1
        }}
      ],
      "clearsObstacles": ["A"]
    },
    {
      "link": [1, 4],
      "name": "Suitless Shinespark",
      "entranceCondition": {
        "comeInShinecharged": {
          "framesRequired": 60
        }
      },
      "requires": [
        "canSuitlessMaridia",
        {"shinespark": {
          "frames": 159,
          "excessFrames": 43
        }}
      ],
      "clearsObstacles": ["A"]
    },
    {
      "link": [1, 4],
      "name": "G-Mode Overload PLMs",
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [1],
          "mode": "any",
          "artificialMorph": false
        }},
        "canSuitlessMaridia"
      ],
      "note": "Overload PLMs by touching the sand, then move through the speed blocks. Avoiding the sand pits is easier without Gravity or HiJump."
    },
    {
      "link": [1, 5],
      "name": "Base",
      "requires": [
        "Gravity",
        "Morph"
      ]
    },
    {
      "link": [1, 5],
      "name": "Suitless Jump Assist",
      "requires": [
        "canSuitlessMaridia",
        "Morph",
        {"or": [
          "canSpringBallJumpMidAir",
          "HiJump"
        ]}
      ]
    },
    {
      "link": [1, 5],
      "name": "Suitless Frozen Puyo",
      "requires": [
        "canSuitlessMaridia",
        "Morph",
        "canTrickyUseFrozenEnemies"
      ]
    },
    {
      "link": [1, 5],
      "name": "Cross Room Jump Shinespark",
      "requires": [
        "Morph",
        "canCrossRoomJumpIntoWater",
        "canShinechargeMovement",
        "canMidairShinespark",
        {"adjacentRunway": {
          "fromNode": 1,
          "usedTiles": 1,
          "physics": ["air"]
        }},
        {"canComeInCharged": {
          "framesRemaining": 22,
          "fromNode": 1,
          "unusableTiles": 1
        }},
        {"shinespark": {"frames": 55}}
      ]
    },
    {
      "link": [1, 5],
      "name": "Cross Room Jump with Speedbooster",
      "entranceCondition": {
        "comeInJumping": {
          "speedBooster": true,
          "minTiles": 43
        }
      },
      "requires": [
        "Morph",
        "canCrossRoomJumpIntoWater"
      ],
      "note": "Needs max horizontal speed coming from 43 runway tiles in the adjacent room."
    },
    {
      "link": [1, 5],
      "name": "Cross Room Jump with Speedbooster, Spring Ball",
      "entranceCondition": {
        "comeInJumping": {
          "speedBooster": true,
          "minTiles": 6.4375
        }
      },
      "requires": [
        "Morph",
        "canCrossRoomJumpIntoWater",
        "canSpringBallBounce"
      ],
      "note": "Needs a runway of 7 tiles with no open end in the adjacent room, to get enough height. This is a peak of height with speed booster, no hjb, while underwater."
    },
    {
      "link": [1, 5],
      "name": "G-Mode Morph Direct",
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [1],
          "mode": "direct",
          "artificialMorph": true
        }},
        {"or": [
          {"and": [
            "Gravity",
            "h_canArtificialMorphIBJ",
            "canDodgeWhileShooting"
          ]},
          {"and": [
            "SpringBall",
            {"or": [
              "Gravity",
              "HiJump"
            ]},
            {"or": [
              "canTrickyJump",
              {"ammo": {"type": "PowerBomb", "count": 1}}
            ]}
          ]}
        ]}
      ],
      "clearsObstacles": ["B"],
      "note": "Be careful not to touch or bomb the sand in order to grab the item before PLMs are overloaded."
    },
    {
      "link": [1, 5],
      "name": "G-Mode Morph",
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [1],
          "mode": "any",
          "artificialMorph": true
        }},
        {"or": [
          {"and": [
            "Gravity",
            "h_canArtificialMorphIBJ"
          ]},
          {"and": [
            "SpringBall",
            {"or": [
              "Gravity",
              "HiJump"
            ]},
            {"or": [
              "canTrickyJump",
              {"ammo": {"type": "PowerBomb", "count": 1}}
            ]}
          ]}
        ]}
      ]
    },
    {
      "link": [1, 5],
      "name": "Botwoon Energy Tank Room Puyo Bomb-Grapple-Jump",
      "notable": true,
      "requires": [
        "canSuitlessMaridia",
        "canBombGrappleJump",
        "canCrouchJump"
      ],
      "note": [
        "Lure a Puyo close to the sand and use it to Bomb-Grapple-Jump up to the Morph Ball maze.",
        "It helps to predict the jump pattern of the enemy."
      ]
    },
    {
      "link": [4, 1],
      "name": "Speed Blocks Already Broken With Gravity",
      "requires": [
        "Gravity",
        {"or": [
          "canPlayInSand",
          "SpaceJump",
          "h_canUseSpringBall"
        ]},
        {"obstaclesCleared": ["A"]}
      ]
    },
    {
      "link": [4, 1],
      "name": "Speed Blocks Already Broken Suitless",
      "requires": [
        "canSuitlessMaridia",
        "HiJump",
        {"or": [
          "h_canUseSpringBall",
          "canPlayInSand"
        ]},
        {"obstaclesCleared": ["A"]}
      ]
    },
    {
      "link": [4, 1],
      "name": "Shinecharge",
      "requires": [
        "Gravity",
        {"canShineCharge": {
          "usedTiles": 22,
          "gentleDownTiles": 4,
          "openEnd": 1
        }}
      ],
      "clearsObstacles": ["A"]
    },
    {
      "link": [4, 1],
      "name": "Run Through",
      "entranceCondition": {
        "comeInShinecharging": {
          "length": 22,
          "gentleDownTiles": 4,
          "openEnd": 1
        }
      },
      "requires": [
        "Gravity"
      ],
      "clearsObstacles": ["A"]
    },
    {
      "link": [4, 1],
      "name": "Shinespark",
      "entranceCondition": {
        "comeInShinecharged": {
          "framesRequired": 80
        }
      },
      "requires": [
        "Gravity",
        {"shinespark": {
          "frames": 115,
          "excessFrames": 12
        }}
      ],
      "clearsObstacles": ["A"]
    },
    {
      "link": [4, 1],
      "name": "Suitless Shinespark",
      "entranceCondition": {
        "comeInShinecharged": {
          "framesRequired": 160
        }
      },
      "requires": [
        "canSuitlessMaridia",
        {"shinespark": {
          "frames": 147,
          "excessFrames": 15
        }}
      ],
      "clearsObstacles": ["A"],
      "note": "Coming in with zero momentum, all it takes is one non-hjb full height jump forward, then activate."
    },
    {
      "link": [4, 1],
      "name": "Suitless Water Shinecharge",
      "entranceCondition": {
        "comeInShinecharging": {
          "length": 6,
          "openEnd": 1
        }
      },
      "requires": [
        "canWaterShineCharge"
      ],
      "clearsObstacles": ["A"],
      "devNote": [
        "This is just a rough estimate of the minimum number of tiles that this runway can represent.",
        "It is designed for a skill level that won't be able to use canStutterWaterShineCharge."
      ]
    },
    {
      "link": [4, 1],
      "name": "Suitless Stutter Water Shinecharge",
      "entranceCondition": {
        "comeInRunning": {
          "speedBooster": true,
          "minTiles": 2
        }
      },
      "requires": [
        "canStutterWaterShineCharge"
      ],
      "clearsObstacles": ["A"]
    },
    {
      "link": [4, 1],
      "name": "G-Mode Overload PLMs",
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [1],
          "mode": "any",
          "artificialMorph": true
        }},
        {"or": [
          "canTrickyJump",
          {"and": [
            "Gravity",
            "SpaceJump"
          ]}
        ]}
      ],
      "note": [
        "Overload PLMs by touching the sand, then move through the speed blocks.",
        "Shoot the Puyo while crouching to increase accuracy.",
        "Avoiding the right pit is much easier without Gravity or HiJump.",
        "Standing on the edge and spin jumping to the left is much easier than a running jump.",
        "While on the left side of this platform, the Puyo to the left will start moving; carefully kill it."
      ]
    },
    {
      "link": [4, 4],
      "name": "Leave with Runway",
      "requires": [],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 23,
          "gentleUpTiles": 4,
          "openEnd": 1
        }
      }
    },
    {
      "link": [4, 4],
      "name": "Zoa Farm",
      "requires": [
        {"refill": ["Energy", "Missile", "Super"]}
      ]
    },
    {
      "link": [4, 5],
      "name": "G-Mode Morph Direct",
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [4],
          "mode": "direct",
          "artificialMorph": true
        }},
        {"or": [
          {"and": [
            "Gravity",
            "h_canArtificialMorphIBJ"
          ]},
          {"and": [
            "SpringBall",
            {"or": [
              "Gravity",
              "HiJump"
            ]}
          ]}
        ]}
      ],
      "clearsObstacles": ["B"],
      "note": [
        "Be careful not to touch or bomb the sand in order to grab the item before PLMs are overloaded.",
        "With bombs, kill the Zoas and they will stop spawning."
      ]
    },
    {
      "link": [4, 5],
      "name": "G-Mode Morph",
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [1],
          "mode": "any",
          "artificialMorph": true
        }},
        {"or": [
          {"and": [
            "Gravity",
            "h_canArtificialMorphIBJ"
          ]},
          {"and": [
            "SpringBall",
            {"or": [
              "Gravity",
              "HiJump"
            ]}
          ]}
        ]}
      ],
      "note": "With bombs, kill the Zoas and they will stop spawning."
    },
    {
      "link": [4, 6],
      "name": "Base",
      "requires": [
        "Gravity"
      ]
    },
    {
      "link": [4, 6],
      "name": "Suitless Jump Assist",
      "requires": [
        "canSuitlessMaridia",
        {"or": [
          "canSpringBallJumpMidAir",
          "HiJump"
        ]}
      ]
    },
    {
      "link": [4, 6],
      "name": "Suitless Frozen Zoa",
      "requires": [
        "canSuitlessMaridia",
        "canUseFrozenEnemies"
      ]
    },
    {
      "link": [4, 6],
      "name": "Suitless Water Shinecharge",
      "entranceCondition": {
        "comeInShinecharging": {
          "length": 6,
          "openEnd": 1
        }
      },
      "requires": [
        "Morph",
        "canWaterShineCharge",
        {"shinespark": {"frames": 8}}
      ],
      "note": "Shinespark diagonally over the zoa pit or run through the speed blocks and shinespark after turning around.",
      "devNote": [
        "This is just a rough estimate of the minimum number of tiles that this runway can represent.",
        "It is designed for a skill level that won't be able to use canStutterWaterShineCharge."
      ]
    },
    {
      "link": [4, 6],
      "name": "Suitless Stutter Water Shinecharge",
      "entranceCondition": {
        "comeInRunning": {
          "speedBooster": true,
          "minTiles": 2
        }
      },
      "requires": [
        "Morph",
        "canStutterWaterShineCharge",
        {"shinespark": {"frames": 8}}
      ],
      "note": "Shinespark diagonally over the zoa pit or run through the speed blocks and shinespark after turning around."
    },
    {
      "link": [4, 6],
      "name": "Cross Room Jump Shinespark",
      "requires": [
        "Morph",
        "canCrossRoomJumpIntoWater",
        "canShinechargeMovement",
        "canMidairShinespark",
        {"adjacentRunway": {
          "fromNode": 4,
          "usedTiles": 1,
          "physics": ["air"]
        }},
        {"canComeInCharged": {
          "framesRemaining": 20,
          "fromNode": 4,
          "unusableTiles": 1
        }},
        {"shinespark": {"frames": 46, "excessFrames": 3}}
      ]
    },
    {
      "link": [4, 6],
      "name": "Cross Room Jump with Speedbooster",
      "entranceCondition": {
        "comeInJumping": {
          "speedBooster": true,
          "minTiles": 6.4375
        }
      },
      "requires": [
        "canCrossRoomJumpIntoWater"
      ],
      "note": "Requires running 7 tiles with no open end in the adjacent room, as this is a peak in jump speed."
    },
    {
      "link": [4, 6],
      "name": "Bomb Grapple Jump",
      "requires": [
        "canSuitlessMaridia",
        "h_canCrouchJumpDownGrab",
        "canBombGrappleJump"
      ],
      "note": "Use the respawning Zoas to double jump up to the Morph Ball maze."
    },
    {
      "link": [5, 1],
      "name": "Base",
      "requires": [
        "Morph"
      ],
      "note": "If the Puyos are alive, lure the first to the right, then roll out of the hole, unmorph and fight them. Crouching while shooting may increase accuracy.",
      "devNote": "FIXME This probably shouldnt be free if the Puyos are still alive."
    },
    {
      "link": [5, 1],
      "name": "G-Mode Morph Exit Tunnel Before Leaving G-Mode",
      "requires": [
        {"obstaclesCleared": ["B"]}
      ],
      "note": "If the Puyos are alive, lure the first to the right, then roll out of the hole, unmorph and fight them. Crouching while shooting may increase accuracy.",
      "devNote": "FIXME This probably shouldnt be free if the Puyos are still alive."
    },
    {
      "link": [5, 4],
      "name": "G-Mode Morph Exit Tunnel Before Leaving G-Mode",
      "requires": [
        {"obstaclesCleared": ["B"]}
      ]
    },
    {
      "link": [5, 6],
      "name": "Base",
      "requires": [
        "Morph",
        {"or": [
          "SpringBall",
          {"and": [
            "Gravity",
            {"or": [
              "Bombs",
              {"ammo": {"type": "PowerBomb", "count": 3}}
            ]}
          ]}
        ]}
      ]
    },
    {
      "link": [5, 6],
      "name": "Suitless Bootless Mid-Air Morph",
      "requires": [
        "canSuitlessMaridia",
        "Morph",
        "canDisableEquipment"
      ],
      "note": "Jump and mid-air morph. This is much easier with Gravity and HiJump turned off."
    },
    {
      "link": [6, 4],
      "name": "Base",
      "requires": []
    },
    {
      "link": [6, 5],
      "name": "Base",
      "requires": [
        "Morph",
        {"or": [
          "SpringBall",
          {"and": [
            "Gravity",
            {"or": [
              "Bombs",
              {"ammo": {"type": "PowerBomb", "count": 3}}
            ]}
          ]}
        ]}
      ]
    },
    {
      "link": [6, 5],
      "name": "Suitless Bootless Mid-Air Morph",
      "requires": [
        "canSuitlessMaridia",
        "Morph",
        "canDisableEquipment"
      ],
      "note": "Jump and mid-air morph. This is much easier with Gravity and HiJump turned off."
    }
  ]
}
