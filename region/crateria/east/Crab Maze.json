{
  "$schema": "../../../schema/m3-room.schema.json",
  "id": 36,
  "name": "Crab Maze",
  "area": "Crateria",
  "subarea": "East",
  "playable": true,
  "roomAddress": "0x7957D",
  "roomEnvironments": [{"heated": false}],
  "nodes": [
    {
      "id": 1,
      "name": "Top Door",
      "nodeType": "door",
      "nodeSubType": "blue",
      "nodeAddress": "0x0018a96",
      "doorOrientation": "up",
      "doorEnvironments": [{"physics": "air"}]
    },
    {
      "id": 2,
      "name": "Left Door",
      "nodeType": "door",
      "nodeSubType": "blue",
      "nodeAddress": "0x0018aae",
      "doorOrientation": "left",
      "doorEnvironments": [{"physics": "air"}]
    },
    {
      "id": 3,
      "name": "Crab Maze Middle Junction",
      "nodeType": "junction",
      "nodeSubType": "junction"
    }
  ],
  "enemies": [
    {
      "id": "e1",
      "groupName": "Crab Maze Top Right Sciser",
      "enemyName": "Sciser",
      "quantity": 1,
      "homeNodes": [1]
    },
    {
      "id": "e2",
      "groupName": "Crab Maze Bottom Left Scisers",
      "enemyName": "Sciser",
      "quantity": 3,
      "homeNodes": [2]
    },
    {
      "id": "e3",
      "groupName": "Crab Maze Top Left Scisers",
      "enemyName": "Sciser",
      "quantity": 4,
      "homeNodes": [3]
    }
  ],
  "links": [
    {
      "from": 1,
      "to": [
        {"id": 1},
        {"id": 3}
      ]
    },
    {
      "from": 2,
      "to": [
        {"id": 1},
        {"id": 2},
        {"id": 3}
      ]
    },
    {
      "from": 3,
      "to": [
        {"id": 1},
        {"id": 2}
      ]
    }
  ],
  "strats": [
    {
      "id": 1,
      "link": [1, 1],
      "name": "Sciser Ice Clip Door Lock Skip",
      "requires": [
        {"ammo": {"type": "Super", "count": 1}},
        {"or": [
          "h_canXRayMorphIceClip",
          "h_canPreciseIceClip"
        ]}
      ],
      "bypassesDoorShell": true,
      "flashSuitChecked": true,
      "note": [
        "Shoot a Super as a Sciser crawls near the top door, then freeze it mid-air and use it to clip up past the door shell.",
        "If you don't have Morph and X-Ray, you must shoot the Super while the Sciser is on the slope near the door, not on the door itself."
      ],
      "devNote": "This doesn't seem possible to get the crab frozen at the high pixel position."
    },
    {
      "id": 2,
      "link": [1, 1],
      "name": "Sciser Farm",
      "requires": [
        {"resetRoom": {
          "nodes": [1],
          "mustStayPut": false
        }},
        {"refill": ["Energy", "PowerBomb"]}
      ]
    },
    {
      "id": 3,
      "link": [1, 1],
      "name": "Crystal Flash",
      "requires": [
        "h_canCrystalFlash"
      ],
      "flashSuitChecked": true
    },
    {
      "id": 4,
      "link": [1, 1],
      "name": "Leave With Door Frame Below",
      "requires": [],
      "exitCondition": {
        "leaveWithDoorFrameBelow": {
          "height": 2
        }
      }
    },
    {
      "id": 5,
      "link": [1, 1],
      "name": "Leave With Platform Below",
      "requires": [],
      "exitCondition": {
        "leaveWithPlatformBelow": {
          "height": 6,
          "leftPosition": -2.5,
          "rightPosition": 2.5
        }
      }
    },
    {
      "id": 6,
      "link": [1, 1],
      "name": "G-Mode Setup - Frozen Sciser",
      "notable": false,
      "requires": [
        "canUpwardGModeSetup",
        "canTrickyUseFrozenEnemies",
        "h_canUseSpringBall",
        "canBePatient"
      ],
      "exitCondition": {
        "leaveWithGModeSetup": {}
      },
      "flashSuitChecked": true,
      "note": [
        "The nearby Global crab can be used to exit on the left side of the door.",
        "Exiting on the right will require travelling the Morph maze to find a local crab or two."
      ],
      "devNote": [
        "There is a Morphless way to jump on the crab with aim down but it feels too precise to include.",
        "Global Crab (left side) takes 40 seconds, local crab (Right side) is 180.  Finding two left side crabs to use together is faster."
      ]
    },
    {
      "id": 7,
      "link": [1, 1],
      "name": "G-Mode Regain Mobility",
      "requires": [
        {"enemyDamage": {
          "enemy": "Sciser",
          "type": "contact",
          "hits": 1
        }}
      ],
      "gModeRegainMobility": {},
      "flashSuitChecked": true
    },
    {
      "id": 8,
      "link": [1, 1],
      "name": "Carry G-Mode Back Up",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "direct",
          "morphed": false
        },
        "comesThroughToilet": "any"
      },
      "requires": [],
      "exitCondition": {
        "leaveWithGMode": {
          "morphed": false
        }
      },
      "bypassesDoorShell": true,
      "flashSuitChecked": true
    },
    {
      "id": 9,
      "link": [1, 1],
      "name": "Carry G-Mode Morph Back Up",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "direct",
          "morphed": true
        },
        "comesThroughToilet": "any"
      },
      "requires": [
        "h_canArtificialMorphMovement"
      ],
      "exitCondition": {
        "leaveWithGMode": {
          "morphed": true
        }
      },
      "bypassesDoorShell": true,
      "flashSuitChecked": true
    },
    {
      "id": 10,
      "link": [1, 3],
      "name": "Base",
      "requires": [
        "Morph"
      ]
    },
    {
      "id": 11,
      "link": [1, 3],
      "name": "G-Mode Morph",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "any",
          "morphed": true
        },
        "comesThroughToilet": "any"
      },
      "requires": [
        {"or": [
          "h_canArtificialMorphSpringBall",
          {"and": [
            "h_canArtificialMorphBombThings",
            "Gravity"
          ]},
          "h_canArtificialMorphIBJ"
        ]}
      ],
      "flashSuitChecked": true,
      "note": [
        "Without Springball or Gravity, it is possible to overload PLMs with the crumble blocks with bombs.",
        "Take the first left above the waterline. Place bombs in the single tile nook on the left."
      ]
    },
    {
      "id": 12,
      "link": [2, 1],
      "name": "G-Mode Morph to overload Crumble Block Plms",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "any",
          "morphed": true
        }
      },
      "requires": [
        {"or": [
          {"and": [
            "Gravity",
            "h_canArtificialMorphIBJ"
          ]},
          {"and": [
            "h_canArtificialMorphSpringBall",
            "HiJump",
            "h_canArtificialMorphBombs"
          ]}
        ]}
      ],
      "flashSuitChecked": true,
      "note": [
        "Place bombs at the far right, next to the low underwater ceiling.",
        "To safely bomb the fast crab, wait just left of the crack on the floor where it falls."
      ]
    },
    {
      "id": 13,
      "link": [2, 2],
      "name": "Leave with Runway",
      "requires": [],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 8,
          "openEnd": 0,
          "steepUpTiles": 1
        }
      },
      "devNote": "Because the next tile is a slope into the water, it behaves like no open end."
    },
    {
      "id": 14,
      "link": [2, 2],
      "name": "Leave with Runway, With Gravity",
      "requires": [],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 29,
          "openEnd": 0,
          "steepUpTiles": 5,
          "steepDownTiles": 1
        }
      }
    },
    {
      "id": 15,
      "link": [2, 2],
      "name": "Leave with Spark (Water Shinecharge)",
      "requires": [
        "canWaterShineCharge",
        {"canShineCharge": {
          "usedTiles": 20,
          "openEnd": 1
        }},
        {"or": [
          {"shinespark": {"frames": 53}},
          {"and": [
            "canShinechargeMovementComplex",
            {"shinespark": {"frames": 30}}
          ]}
        ]}
      ],
      "exitCondition": {
        "leaveWithSpark": {
          "position": "bottom"
        }
      }
    },
    {
      "id": 16,
      "link": [2, 2],
      "name": "Leave With Temporary Blue",
      "requires": [
        "canWaterShineCharge",
        {"canShineCharge": {
          "usedTiles": 20,
          "openEnd": 1
        }},
        "canLongChainTemporaryBlue",
        "canXRayTurnaround",
        "can4HighMidAirMorph"
      ],
      "exitCondition": {
        "leaveWithTemporaryBlue": {}
      },
      "flashSuitChecked": true
    },
    {
      "id": 17,
      "link": [2, 2],
      "name": "Sciser Farm",
      "requires": [
        {"resetRoom": {
          "nodes": [2],
          "mustStayPut": false
        }},
        {"refill": ["Energy", "PowerBomb"]}
      ]
    },
    {
      "id": 18,
      "link": [2, 2],
      "name": "G-Mode Setup - Getting hit by Sciser",
      "notable": false,
      "requires": [],
      "exitCondition": {
        "leaveWithGModeSetup": {}
      },
      "flashSuitChecked": true
    },
    {
      "id": 19,
      "link": [2, 3],
      "name": "Base",
      "requires": [
        {"or": [
          "canCarefulJump",
          "canUseFrozenEnemies",
          "SpaceJump",
          {"and": [
            "Gravity",
            {"or": [
              "HiJump",
              "canWalljump",
              "h_canCrouchJumpDownGrab",
              "canIBJ",
              "canSpringBallJumpMidAir"
            ]}
          ]}
        ]}
      ]
    },
    {
      "id": 20,
      "link": [3, 1],
      "name": "Base",
      "requires": [
        "Morph"
      ]
    },
    {
      "id": 21,
      "link": [3, 2],
      "name": "Base",
      "requires": []
    }
  ],
  "nextStratId": 22
}
