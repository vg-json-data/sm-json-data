{
  "$schema": "../../../schema/m3-room.schema.json",
  "id": 242,
  "name": "Tourian Escape Room 4",
  "area": "Tourian",
  "subarea": "Main",
  "playable": true,
  "roomAddress": "0x7DEDE",
  "roomEnvironments": [{"heated": false}],
  "nodes": [
    {
      "id": 1,
      "name": "Left Door",
      "nodeType": "door",
      "nodeSubType": "grey",
      "nodeAddress": "0x001ab28",
      "doorEnvironments": [{"physics": "air"}],
      "locks": [
        {
          "name": "Tourian Escape 4 Lock (to Escape Room 3)",
          "lockType": "permanent",
          "unlockStrats": [
            {
              "name": "Base",
              "notable": false,
              "requires": [
                "never"
              ]
            }
          ]
        }
      ]
    },
    {
      "id": 2,
      "name": "Right Door",
      "nodeType": "door",
      "nodeSubType": "blue",
      "nodeAddress": "0x001ab34",
      "doorEnvironments": [{"physics": "air"}]
    },
    {
      "id": 3,
      "name": "Bottom of Shaft",
      "nodeType": "junction",
      "nodeSubType": "junction",
      "note": "This node represents being at the bottom of the shaft with the acid just starting to rise."
    }
  ],
  "obstacles": [
    {
      "id": "A",
      "name": "Acid Filling the Right Runway",
      "obstacleType": "abstract"
    }
  ],
  "enemies": [
    {
      "id": "e1",
      "groupName": "Tourian Escape Room 4 Left Pirates",
      "enemyName": "Tourian Space Pirate (all)",
      "quantity": 6,
      "homeNodes": [1]
    },
    {
      "id": "e2",
      "groupName": "Tourian Escape Room 4 Right Pirates",
      "enemyName": "Tourian Space Pirate (all)",
      "quantity": 7,
      "homeNodes": [2]
    }
  ],
  "reusableRoomwideNotable": [
    {
      "name": "Tourian Escape Room 4 Acid Bath Shinespark",
      "note": [
        "Gain a shinecharge by running right-to-left at the bottom of the room.",
        "This can be done either using Gravity and a regular shortcharge, or suitless by performing a stutter just before entering acid physics.",
        "Shinespark up the shaft."
      ]
    }
  ],
  "links": [
    {
      "from": 1,
      "to": [
        {"id": 1},
        {
          "id": 3,
          "note": "The acid starts rising when Samus is at the bottom of the long fall"
        }
      ]
    },
    {
      "from": 2,
      "to": [
        {"id": 1},
        {"id": 2},
        {"id": 3}
      ]
    },
    {
      "from": 3,
      "to": [
        {"id": 1},
        {
          "id": 2,
          "note": "The acid starts rising when Samus is at the bottom of the long fall"
        },
        {"id": 3}
      ]
    }
  ],
  "strats": [
    {
      "link": [1, 1],
      "name": "Leave with Runway",
      "requires": [],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 1,
          "openEnd": 1
        }
      }
    },
    {
      "link": [1, 1],
      "name": "Crystal Flash",
      "requires": [
        "h_canCrystalFlash"
      ]
    },
    {
      "link": [1, 1],
      "name": "G-Mode Regain Mobility",
      "requires": [
        {"enemyDamage": {
          "enemy": "Tourian Space Pirate (all)",
          "type": "contact",
          "hits": 1
        }}
      ],
      "gModeRegainMobility": {}
    },
    {
      "link": [1, 3],
      "name": "Base",
      "requires": [
        {"or": [
          "HiJump",
          "SpaceJump",
          "canWalljump",
          "h_canIBJ",
          "canSpringBallJumpMidAir"
        ]}
      ],
      "note": "The pirates are free to kill, although they take some time."
    },
    {
      "link": [1, 3],
      "name": "Shinespark",
      "entranceCondition": {
        "comeInShinecharged": {
          "framesRequired": 15
        }
      },
      "requires": [
        "canPrepareForNextRoom",
        "canShinechargeMovement",
        "canMidairShinespark",
        {"shinespark": {"frames": 57, "excessFrames": 13}}
      ]
    },
    {
      "link": [1, 3],
      "name": "G-Mode Morph Power Bomb Pirate Kill",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "any",
          "morphed": true
        }
      },
      "requires": [
        "h_canArtificialMorphIBJ",
        {"ammo": {"type": "PowerBomb", "count": 10}}
      ],
      "note": [
        "IBJ and use 10 PBs to kill the pirates and get to the top. Exit gmode and fall to the bottom.",
        "Note that there is a path up to the right that doesn't need wall jumps, but a crouch jump down grab is needed to get to the final platform."
      ]
    },
    {
      "link": [1, 3],
      "name": "Grapple Teleport",
      "entranceCondition": {
        "comeInWithGrappleTeleport": {
          "blockPositions": [[12, 12], [12, 13]]
        }
      },
      "requires": []
    },
    {
      "link": [2, 1],
      "name": "Crystal Flash Grapple Clip",
      "requires": [
        "h_canJumpIntoCrystalFlashClip",
        "HiJump",
        "Grapple"
      ],
      "note": [
        "Clear the Pirates near the door.",
        "Jump into a Crystal Flash clip where the ceiling is a single tile thick.",
        "Switch to Grappling Beam before the Crystal Flash ends and mash shoot while holding down."
      ]
    },
    {
      "link": [2, 1],
      "name": "Grapple Teleport",
      "entranceCondition": {
        "comeInWithGrappleTeleport": {
          "blockPositions": [[5, 3], [7, 2]]
        }
      },
      "requires": []
    },
    {
      "link": [2, 2],
      "name": "Leave with Runway",
      "requires": [
        {"obstaclesNotCleared": ["A"]},
        {"or": [
          "canCarefulJump",
          "ScrewAttack",
          "Morph",
          {"enemyDamage": {
            "enemy": "Tourian Space Pirate (all)",
            "type": "contact",
            "hits": 1
          }}
        ]},
        {"or": [
          "canDodgeWhileShooting",
          "Morph",
          {"enemyKill": {
            "enemies": [
              [
                "Tourian Space Pirate (all)",
                "Tourian Space Pirate (all)"
              ]
            ],
            "explicitWeapons": ["Plasma", "ScrewAttack", "Missile", "Super"]
          }},
          {"enemyDamage": {
            "enemy": "Tourian Space Pirate (all)",
            "type": "laser",
            "hits": 8
          }},
          {"and": [
            "Ice",
            {"enemyDamage": {
              "enemy": "Tourian Space Pirate (all)",
              "type": "laser",
              "hits": 6
            }}
          ]},
          {"and": [
            {"or": [
              "Wave",
              "Spazer"
            ]},
            {"enemyDamage": {
              "enemy": "Tourian Space Pirate (all)",
              "type": "laser",
              "hits": 3
            }}
          ]},
          {"and": [
            "Wave",
            "Spazer",
            {"enemyDamage": {
              "enemy": "Tourian Space Pirate (all)",
              "type": "laser",
              "hits": 2
            }}
          ]}
        ]}
      ],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 26,
          "openEnd": 1
        }
      }
    },
    {
      "link": [2, 2],
      "name": "Leave with Runway, Race the Acid",
      "requires": [
        "canCarefulJump",
        {"or": [
          {"and": [
            "canTrickyJump",
            "canDodgeWhileShooting"
          ]},
          {"enemyKill": {
            "enemies": [
              [
                "Tourian Space Pirate (all)",
                "Tourian Space Pirate (all)"
              ]
            ],
            "explicitWeapons": [
              "Plasma",
              "ScrewAttack",
              "Missile",
              "Super",
              "PowerBomb"
            ]
          }},
          {"and": [
            {"or": [
              "Ice",
              "Wave",
              "Spazer"
            ]},
            {"or": [
              "Morph",
              "canDodgeWhileShooting"
            ]}
          ]},
          {"and": [
            "Ice",
            {"enemyDamage": {
              "enemy": "Tourian Space Pirate (all)",
              "type": "laser",
              "hits": 6
            }}
          ]},
          {"and": [
            {"or": [
              "Wave",
              "Spazer"
            ]},
            {"enemyDamage": {
              "enemy": "Tourian Space Pirate (all)",
              "type": "laser",
              "hits": 3
            }}
          ]},
          {"and": [
            "Wave",
            "Spazer",
            {"enemyDamage": {
              "enemy": "Tourian Space Pirate (all)",
              "type": "laser",
              "hits": 2
            }}
          ]}
        ]}
      ],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 26,
          "openEnd": 1
        }
      }
    },
    {
      "link": [2, 3],
      "name": "Base",
      "requires": [
        {"or": [
          "canCarefulJump",
          "ScrewAttack",
          "Morph",
          {"enemyDamage": {
            "enemy": "Tourian Space Pirate (all)",
            "type": "contact",
            "hits": 1
          }}
        ]}
      ]
    },
    {
      "link": [2, 3],
      "name": "Kill Pirates With Speed",
      "entranceCondition": {
        "comeInShinecharging": {
          "length": 6,
          "openEnd": 0
        }
      },
      "requires": [],
      "devNote": [
        "There are 19 unusable tiles in this runway.",
        "It is not worthwhile to Shinespark into the room, because that would require more energy than the Pirates would deal."
      ]
    },
    {
      "link": [3, 1],
      "name": "Protected Shaft Climb With Screw Attack",
      "requires": [
        "ScrewAttack",
        {"or": [
          "canConsecutiveWalljump",
          {"and": [
            "SpaceJump",
            "HiJump"
          ]}
        ]}
      ],
      "note": [
        "Use Screw Attack to avoid Space Pirate attacks while climbing the central shaft.",
        "The Screw Attack effect is not active when Samus is preparing to Walljump."
      ]
    },
    {
      "link": [3, 1],
      "name": "Protected Shaft Climb With PseudoScrew",
      "requires": [
        {"or": [
          {"and": [
            "canConsecutiveWalljump",
            "canWalljumpWithCharge"
          ]},
          {"and": [
            "SpaceJump",
            "HiJump",
            "canPseudoScrew"
          ]}
        ]}
      ],
      "note": [
        "Use Pseudo Screw to avoid Space Pirate attacks while climbing the central shaft.",
        "The Screw Attack effect is not active when Samus is preparing to Walljump."
      ]
    },
    {
      "link": [3, 1],
      "name": "Reverse Tourian Escape Room 4 Dodge While Climbing",
      "notable": true,
      "requires": [
        {"or": [
          "canCarefulJump",
          "ScrewAttack",
          "HiJump"
        ]},
        {"or": [
          "canConsecutiveWalljump",
          {"and": [
            "SpaceJump",
            {"or": [
              "HiJump",
              {"and": [
                "canCarefulJump",
                {"acidFrames": 20},
                {"enemyDamage": {
                  "enemy": "Tourian Space Pirate (all)",
                  "type": "contact",
                  "hits": 1
                }}
              ]},
              {"acidFrames": 100}
            ]}
          ]}
        ]}
      ],
      "note": [
        "Navigate Leodox Room in reverse by killing or distracting the right side pirates and manipulating or dodging the left side pirates during the shaft climb.",
        "The acid starts rising when Samus is at the bottom of the long climb.",
        "The right-side pirates can be killed while going down to prevent having to dodge their lasers during the climb.",
        "Alternatively, jump and force the pirates to shoot just before starting to climb."
      ]
    },
    {
      "link": [3, 1],
      "name": "Tourian Escape Room 4 Acid Bath Shinespark (Gravity)",
      "notable": true,
      "reusableRoomwideNotable": "Tourian Escape Room 4 Acid Bath Shinespark",
      "requires": [
        "Gravity",
        {"canShineCharge": {
          "usedTiles": 17,
          "openEnd": 0
        }},
        {"acidFrames": 90},
        "canShinechargeMovementComplex",
        "canMidairShinespark",
        {"shinespark": {
          "frames": 76,
          "excessFrames": 6
        }}
      ],
      "note": [
        "Gain a shinecharge by running right-to-left at the bottom of the room.",
        "Move quickly to minimize damage from the acid, which will begin rising as soon as you reach the bottom of the room.",
        "Shinespark up the shaft."
      ]
    },
    {
      "link": [3, 1],
      "name": "Tourian Escape Room 4 Acid Bath Shinespark (Suitless)",
      "notable": true,
      "reusableRoomwideNotable": "Tourian Escape Room 4 Acid Bath Shinespark",
      "requires": [
        "canStutterWaterShineCharge",
        {"acidFrames": 215},
        "canShinechargeMovementTricky",
        "canMidairShinespark",
        {"shinespark": {
          "frames": 83,
          "excessFrames": 2
        }}
      ],
      "note": [
        "Gain a shinecharge by running right-to-left at the bottom of the room, performing a stutter just before the acid reaches Samus' feet.",
        "Use spin jumps to minimize damage from the acid, and spark diagonally (to the left) mid-air to make it up the shaft."
      ]
    },
    {
      "link": [3, 1],
      "name": "Tourian Escape Room 4 IBJ and Acid Bath",
      "notable": true,
      "requires": [
        "canSuitlessLavaDive",
        "h_canJumpIntoIBJ",
        "canDoubleBombJump",
        {"or": [
          {"and": [
            "Gravity",
            {"acidFrames": 150}
          ]},
          {"acidFrames": 450}
        ]}
      ],
      "note": "Clear the right side Space Pirates and then race the rising acid by bomb jumping."
    },
    {
      "link": [3, 2],
      "name": "Base",
      "requires": [
        {"or": [
          "HiJump",
          "SpaceJump",
          "canWalljump",
          "h_canCrouchJumpDownGrab",
          "h_canJumpIntoIBJ",
          "canSpringBallJumpMidAir"
        ]},
        {"or": [
          "canCarefulJump",
          "ScrewAttack",
          {"enemyDamage": {
            "enemy": "Tourian Space Pirate (all)",
            "type": "contact",
            "hits": 1
          }}
        ]}
      ],
      "clearsObstacles": ["A"]
    },
    {
      "link": [3, 3],
      "name": "Crystal Flash",
      "requires": [
        "h_canCrystalFlash"
      ],
      "devNote": "The Crystal Flash should be performed on a platform away from the acid trigger or any Pirates."
    }
  ]
}