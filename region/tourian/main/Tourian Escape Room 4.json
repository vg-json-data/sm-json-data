{
  "$schema": "../../../schema/m3-room.schema.json",
  "id": 242,
  "name": "Tourian Escape Room 4",
  "area": "Tourian",
  "subarea": "Main",
  "playable": true,
  "roomAddress": "0x7DEDE",
  "roomEnvironments": [{"heated": false}],
  "nodes": [
    {
      "id": 1,
      "name": "Left Door",
      "nodeType": "door",
      "nodeSubType": "grey",
      "nodeAddress": "0x001ab28",
      "doorEnvironments": [{"physics": "air"}],
      "gModeImmobile": {
        "requires": [
          {"enemyDamage": {
            "enemy": "Tourian Space Pirate (all)",
            "type": "contact",
            "hits": 1
          }}
        ]
      },
      "locks": [
        {
          "name": "Tourian Escape 4 Lock (to Escape Room 3)",
          "lockType": "permanent",
          "unlockStrats": [
            {
              "name": "Base",
              "notable": false,
              "requires": [
                "never"
              ]
            }
          ]
        }
      ]
    },
    {
      "id": 2,
      "name": "Right Door",
      "nodeType": "door",
      "nodeSubType": "blue",
      "nodeAddress": "0x001ab34",
      "doorEnvironments": [{"physics": "air"}]
    },
    {
      "id": 3,
      "name": "Bottom of Shaft",
      "nodeType": "junction",
      "nodeSubType": "junction",
      "note": "This node represents being at the bottom of the shaft with the acid just starting to rise."
    }
  ],
  "obstacles": [
    {
      "id": "A",
      "name": "Acid Filling the Right Runway",
      "obstacleType": "abstract"
    }
  ],
  "enemies": [
    {
      "id": "e1",
      "groupName": "Tourian Escape Room 4 Left Pirates",
      "enemyName": "Tourian Space Pirate (all)",
      "quantity": 6,
      "homeNodes": [1]
    },
    {
      "id": "e2",
      "groupName": "Tourian Escape Room 4 Right Pirates",
      "enemyName": "Tourian Space Pirate (all)",
      "quantity": 7,
      "homeNodes": [2]
    }
  ],
  "links": [
    {
      "from": 1,
      "to": [
        {"id": 1},
        {
          "id": 3,
          "note": "The acid starts rising when Samus is at the bottom of the long fall"
        }
      ]
    },
    {
      "from": 2,
      "to": [
        {"id": 2},
        {"id": 3}
      ]
    },
    {
      "from": 3,
      "to": [
        {"id": 1},
        {
          "id": 2,
          "note": "The acid starts rising when Samus is at the bottom of the long fall"
        },
        {"id": 3}
      ]
    }
  ],
  "strats": [
    {
      "link": [1, 1],
      "name": "Leave with Runway",
      "requires": [],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 1,
          "openEnd": 1
        }
      }
    },
    {
      "link": [1, 1],
      "name": "Crystal Flash",
      "requires": [
        "h_canCrystalFlash"
      ]
    },
    {
      "link": [1, 3],
      "name": "Base",
      "requires": [
        {"or": [
          "HiJump",
          "SpaceJump",
          "canWalljump",
          "h_canIBJ"
        ]}
      ],
      "note": "The pirates are free to kill, although they take some time."
    },
    {
      "link": [1, 3],
      "name": "G-Mode Morph Power Bomb Pirate Kill",
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [1],
          "mode": "any",
          "artificialMorph": true
        }},
        "h_canArtificialMorphIBJ",
        {"ammo": {"type": "PowerBomb", "count": 10}}
      ],
      "note": [
        "IBJ and use 10 PBs to kill the pirates and get to the top. Exit gmode and fall to the bottom.",
        "Note that there is a path up to the right that doesn't need wall jumps, but a crouch jump down grab is needed to get to the final platform."
      ]
    },
    {
      "link": [2, 2],
      "name": "Leave with Runway",
      "requires": [
        {"obstaclesNotCleared": ["A"]},
        {"or": [
          "canCarefulJump",
          "ScrewAttack",
          "Morph",
          {"enemyDamage": {
            "enemy": "Tourian Space Pirate (all)",
            "type": "contact",
            "hits": 1
          }}
        ]},
        {"or": [
          "canDodgeWhileShooting",
          "Morph",
          {"enemyKill": {
            "enemies": [
              [
                "Tourian Space Pirate (all)",
                "Tourian Space Pirate (all)"
              ]
            ],
            "explicitWeapons": ["Plasma", "ScrewAttack", "Missile", "Super"]
          }},
          {"enemyDamage": {
            "enemy": "Tourian Space Pirate (all)",
            "type": "laser",
            "hits": 8
          }},
          {"and": [
            "Ice",
            {"enemyDamage": {
              "enemy": "Tourian Space Pirate (all)",
              "type": "laser",
              "hits": 6
            }}
          ]},
          {"and": [
            {"or": [
              "Wave",
              "Spazer"
            ]},
            {"enemyDamage": {
              "enemy": "Tourian Space Pirate (all)",
              "type": "laser",
              "hits": 3
            }}
          ]},
          {"and": [
            "Wave",
            "Spazer",
            {"enemyDamage": {
              "enemy": "Tourian Space Pirate (all)",
              "type": "laser",
              "hits": 2
            }}
          ]}
        ]}
      ],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 26,
          "openEnd": 1
        }
      }
    },
    {
      "link": [2, 2],
      "name": "Leave with Runway, Race the Acid",
      "requires": [
        "canCarefulJump",
        {"or": [
          {"and": [
            "canTrickyJump",
            "canDodgeWhileShooting"
          ]},
          {"enemyKill": {
            "enemies": [
              [
                "Tourian Space Pirate (all)",
                "Tourian Space Pirate (all)"
              ]
            ],
            "explicitWeapons": [
              "Plasma",
              "ScrewAttack",
              "Missile",
              "Super",
              "PowerBomb"
            ]
          }},
          {"and": [
            {"or": [
              "Ice",
              "Wave",
              "Spazer"
            ]},
            {"or": [
              "Morph",
              "canDodgeWhileShooting"
            ]}
          ]},
          {"and": [
            "Ice",
            {"enemyDamage": {
              "enemy": "Tourian Space Pirate (all)",
              "type": "laser",
              "hits": 6
            }}
          ]},
          {"and": [
            {"or": [
              "Wave",
              "Spazer"
            ]},
            {"enemyDamage": {
              "enemy": "Tourian Space Pirate (all)",
              "type": "laser",
              "hits": 3
            }}
          ]},
          {"and": [
            "Wave",
            "Spazer",
            {"enemyDamage": {
              "enemy": "Tourian Space Pirate (all)",
              "type": "laser",
              "hits": 2
            }}
          ]}
        ]}
      ],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 26,
          "openEnd": 1
        }
      }
    },
    {
      "link": [2, 3],
      "name": "Base",
      "requires": [
        {"or": [
          "canCarefulJump",
          "ScrewAttack",
          "Morph",
          {"enemyDamage": {
            "enemy": "Tourian Space Pirate (all)",
            "type": "contact",
            "hits": 1
          }}
        ]}
      ]
    },
    {
      "link": [2, 3],
      "name": "Kill Pirates With Speed",
      "entranceCondition": {
        "comeInShinecharging": {
          "length": 6,
          "openEnd": 0
        }
      },
      "requires": [],
      "devNote": [
        "There are 19 unusable tiles in this runway.",
        "It is not worthwhile to Shinespark into the room, because that would require more energy than the Pirates would deal."
      ]
    },
    {
      "link": [3, 1],
      "name": "Protected Shaft Climb With Screw Attack",
      "requires": [
        "ScrewAttack",
        {"or": [
          "canConsecutiveWalljump",
          {"and": [
            "SpaceJump",
            "HiJump"
          ]}
        ]}
      ],
      "note": [
        "Use Screw Attack to avoid Space Pirate attacks while climbing the central shaft.",
        "The Screw Attack effect is not active when Samus is preparing to Walljump."
      ]
    },
    {
      "link": [3, 1],
      "name": "Protected Shaft Climb With PseudoScrew",
      "requires": [
        {"or": [
          {"and": [
            "canConsecutiveWalljump",
            "canWalljumpWithCharge"
          ]},
          {"and": [
            "SpaceJump",
            "HiJump",
            "canPseudoScrew"
          ]}
        ]}
      ],
      "note": [
        "Use Pseudo Screw to avoid Space Pirate attacks while climbing the central shaft.",
        "The Screw Attack effect is not active when Samus is preparing to Walljump."
      ]
    },
    {
      "link": [3, 1],
      "name": "Reverse Tourian Escape Room 4 Dodge While Climbing",
      "notable": true,
      "requires": [
        {"or": [
          "canCarefulJump",
          "ScrewAttack",
          "HiJump"
        ]},
        {"or": [
          "canConsecutiveWalljump",
          {"and": [
            "SpaceJump",
            {"or": [
              "HiJump",
              {"and": [
                "canCarefulJump",
                {"acidFrames": 20},
                {"enemyDamage": {
                  "enemy": "Tourian Space Pirate (all)",
                  "type": "contact",
                  "hits": 1
                }}
              ]},
              {"acidFrames": 100}
            ]}
          ]}
        ]}
      ],
      "note": [
        "Navigate Leodox Room in reverse by killing or distracting the right side pirates and manipulating or dodging the left side pirates during the shaft climb.",
        "The acid starts rising when Samus is at the bottom of the long climb.",
        "The right-side pirates can be killed while going down to prevent having to dodge their lasers during the climb.",
        "Alternatively, jump and force the pirates to shoot just before starting to climb."
      ]
    },
    {
      "link": [3, 2],
      "name": "Base",
      "requires": [
        {"or": [
          "HiJump",
          "SpaceJump",
          "canWalljump",
          "h_canCrouchJumpDownGrab"
        ]},
        {"or": [
          "canCarefulJump",
          "ScrewAttack",
          {"enemyDamage": {
            "enemy": "Tourian Space Pirate (all)",
            "type": "contact",
            "hits": 1
          }}
        ]}
      ],
      "clearsObstacles": ["A"],
      "devNote": "IBJ can be used to avoid wall jumps before the acid starts rising, but a crouch jump down grab is needed near the right door."
    },
    {
      "link": [3, 3],
      "name": "Crystal Flash",
      "requires": [
        "h_canCrystalFlash"
      ],
      "devNote": "The Crystal Flash should be performed on a platform away from the acid trigger or any Pirates."
    }
  ]
}
